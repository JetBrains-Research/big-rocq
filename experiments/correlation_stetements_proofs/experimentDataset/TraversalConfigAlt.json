[{"statement":"Lemma tc_I_ar_rfrmw_I WF T (TCCOH : tc_coherent_alt T) :\n  dom_rel (⦗W⦘ ⨾ (ar ∪ rf ⨾ rmw)⁺ ⨾ ⦗issued T⦘) ⊆₁ issued T.","proof":"rewrite (rmw_in_ppo_loc WF).\napply TCCOH.\n"},{"statement":"Lemma tc_I_ar_I WF T (TCCOH : tc_coherent_alt T) :\n  dom_rel (⦗W⦘ ⨾ ar⁺ ⨾ ⦗issued T⦘) ⊆₁ issued T.","proof":"arewrite (ar ⊆ ar ∪ rf ⨾ ppo ∩ same_loc).\napply TCCOH.\n"},{"statement":"Lemma tc_dr_pb_I WF T (TCCOH : tc_coherent_alt T) :\n  dom_rel ( (detour ∪ rfe) ⨾ (ppo ∪ bob) ⨾ ⦗issued T⦘) ⊆₁ issued T.","proof":"rewrite (dom_l (wf_detourD WF)).\nrewrite (dom_l (wf_rfeD WF)).\narewrite (detour ⊆ ar).\narewrite (rfe ⊆ ar).\nrewrite ppo_in_ar, bob_in_ar.\nrewrite !unionK, !seqA.\nsin_rewrite ar_ar_in_ar_ct.\nby apply tc_I_ar_I.\n"},{"statement":"Lemma tc_coherent_alt_implies_tc_coherent T: \n  tc_coherent_alt T  -> tc_coherent G sc T.","proof":"intro H; destruct H.\nred; splits; eauto.\n2: {\nunfold issuable.\nrepeat (splits; try apply set_subset_inter_r); ins.\n{\nby eapply dom_rel_to_cond.\n}\nby eapply dom_rel_to_cond; rewrite !seqA.\n}\nunfold coverable.\nrepeat (splits; try apply set_subset_inter_r); ins.\n{\nby eapply dom_rel_to_cond.\n}\narewrite (covered T ⊆₁ covered T ∩₁ E).\nrevert tc_C_in_E0; basic_solver.\narewrite (E ⊆₁ R ∪₁ W ∪₁ F).\nunfolder; intro a; forward (apply (lab_rwf lab a)); tauto.\nrewrite !set_inter_union_r; unionL.\n{\nunionR left -> right.\nrepeat (splits; try apply set_subset_inter_r); ins.\nbasic_solver.\neapply dom_rel_to_cond.\nrevert tc_rf_C0; basic_solver 21.\n}\n{\nunionR left -> left.\nrepeat (splits; try apply set_subset_inter_r); ins.\nbasic_solver.\n}\nunionR right.\nrepeat (splits; try apply set_subset_inter_r); ins.\nbasic_solver.\neapply dom_rel_to_cond.\nrevert tc_sc_C0; basic_solver 21.\n"},{"statement":"Lemma tc_coherent_implies_tc_coherent_alt WF WF_SC T: \n  tc_coherent G sc T  -> tc_coherent_alt T.","proof":"intro H; red in H; desf.\nunfold coverable, issuable in *.\napply set_subset_inter_r in CC; desf.\napply set_subset_inter_r in CC; desf.\napply set_subset_inter_r in II; desf.\napply set_subset_inter_r in II; desf.\napply set_subset_inter_r in II; desf.\nconstructor; try done.\n{\nby apply dom_cond_to_rel.\n}\n{\nrewrite CC0.\ntype_solver.\n}\n{\nrewrite CC0, !id_union; relsf; unionL; splits.\n{\nrewrite (dom_r (wf_rfD WF)); type_solver.\n}\n{\napply dom_cond_to_rel; basic_solver 10.\n}\nrewrite (dom_r (wf_rfD WF)); type_solver.\n}\n{\nrewrite CC0 at 1; rewrite !id_union; relsf; unionL; splits.\n{\nrewrite (dom_r (wf_scD WF_SC)); type_solver.\n}\n{\nrewrite (dom_r (wf_scD WF_SC)); type_solver.\n}\napply dom_cond_to_rel; basic_solver 10.\n}\n{\nby apply dom_cond_to_rel.\n}\nby rewrite <- seqA; apply dom_cond_to_rel.\n"},{"statement":"Lemma tc_W_ex_sb_I WF T (TCCOH : tc_coherent_alt T) :\n  dom_rel (⦗W_ex_acq⦘ ⨾ sb ⨾ ⦗issued T⦘) ⊆₁ issued T.","proof":"assert (tc_coherent G sc T) as TCCOH'.\n{\nby apply tc_coherent_alt_implies_tc_coherent.\n}\narewrite (⦗issued T⦘ ⊆ ⦗W⦘ ⨾ ⦗issued T⦘).\n{\nrewrite <- seq_eqvK at 1.\nrewrite issuedW at 1; edone.\n}\narewrite (⦗W_ex_acq⦘ ⊆ ⦗W⦘ ⨾ ⦗W_ex_acq⦘).\n{\nrewrite <- seq_eqvK at 1.\nrewrite W_ex_acq_in_W at 1; done.\n}\narewrite (⦗W_ex_acq⦘ ⨾ sb ⨾ ⦗W⦘ ⊆ ar).\napply ar_I_in_I; auto.\n"},{"statement":"Lemma scCsbI_C WF T (IMMCON : imm_consistent G sc) (TCCOH : tc_coherent G sc T) :\n  sc ⨾ ⦗covered T ∪₁ dom_rel (sb^? ⨾ ⦗issued T⦘)⦘ ⊆ ⦗covered T⦘ ⨾ sc.","proof":"rewrite id_union.\nrewrite seq_union_r.\nunionL.\n{\neapply sc_covered; eauto.\n}\nunfolder.\nins.\ndesf.\nall: eapply wf_scD in H; [|by apply IMMCON].\nall: destruct_seq H as [XX YY].\n{\neapply issuedW in H2; eauto.\ntype_solver.\n}\nsplit; auto.\nassert (covered T y) as CY.\n2: {\neapply dom_sc_covered; eauto.\neexists.\napply seq_eqv_r.\nsplit; eauto.\n}\neapply tc_fwbob_I.\n{\napply tc_coherent_implies_tc_coherent_alt; eauto.\napply IMMCON.\n}\neexists.\napply seq_eqv_r.\nsplit; eauto.\neapply sb_from_f_in_fwbob.\napply seq_eqv_l.\nsplit; auto.\nmode_solver.\n"}]