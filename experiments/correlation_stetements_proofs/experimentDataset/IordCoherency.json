[{"statement":"Lemma init_tls_iord_coherent :\n    iord_coherent G sc (init_tls G).","proof":"red.\nrewrite iord_alt, restr_relE.\nrewrite init_tls_EI at 1.\nbasic_solver 10.\n"},{"statement":"Lemma tlsc_w_covered_issued ICOH:\n    (tc ∩₁ action ↓₁ eq ta_cover) ∩₁ (event ↓₁ W) ⊆₁\n    event ↓₁ (event ↑₁ (tc ∩₁ action ↓₁ eq ta_issue)).","proof":"destruct TCOH.\nunfolder.\nins.\ndesc.\ndestruct x as [a e].\nins.\nsubst.\nexists (mkTL ta_issue e).\nsplits; eauto.\ndestruct (tls_coh_exec _ H) as [Il | EXl].\n{\napply tls_coh_init.\nsplit; [basic_solver| ].\napply init_tls_EI in Il.\nauto.\n}\nred in ICOH.\napply ICOH.\nred.\neexists.\napply seq_eqv_r.\nsplit; eauto.\nred.\napply exec_tls_ENI in EXl.\nred.\nsplits; try by vauto.\ndo 4 left.\nright.\nred.\nbasic_solver 10.\n"},{"statement":"Lemma iord_simpl_E_ENI:\n    iord_simpl G sc ⊆ event ↓ E_ENI^?.","proof":"unfold iord_simpl.\nunfold SB, RF, FWBOB, AR, IPROP, PROP.\nrewrite ppo_in_sb, fwbob_in_sb; auto.\nrewrite inclusion_inter_l1 with (r := sb).\nrewrite inclusion_inter_l1.\nrewrite !inclusion_eqv_rel_true with (dom:=action ↓₁ eq ta_cover).\nrewrite !inclusion_eqv_rel_true with (dom:=action ↓₁ eq ta_issue).\nrewrite !inclusion_eqv_rel_true with (dom:=action ↓₁ is_ta_propagate_to_G G).\nrewrite !seq_id_l, !seq_id_r.\nrewrite ?sb_E_ENI, ?rf_E_ENI, ?co_E_ENI, ?fr_E_ENI, ?ar_E_ENI,       ?furr_E_ENI_cr, ?(sc_E_ENI WF WFSC); auto.\nfold E_ENI.\nrepeat (rewrite ?(@rt_of_trans _ E_ENI), ?(@rewrite_trans _ E_ENI),             ?unionK, ?(@rewrite_trans _ E_ENI),             ?(@rewrite_trans_seq_cr_cr _ E_ENI), ?(@ct_of_trans _ E_ENI)           ).\nall: try now apply E_ENI_trans.\nrepeat rewrite inclusion_seq_eqv_l, inclusion_seq_eqv_r.\ngeneralize (E_ENI_trans G).\nunfold E_ENI.\nbasic_solver 10.\n"},{"statement":"Lemma iord_simpl_tc_doma_impl S (S_E: S ⊆₁ event ↓₁ acts_set G) :\n    doma (iord_simpl G sc ⨾ ⦗S⦘) (event ↓₁ acts_set G).","proof":"rewrite iord_simpl_E_E; auto.\nrewrite crE, map_rel_union, seq_union_l.\napply union_doma.\n2: {\nbasic_solver.\n}\nrewrite S_E.\nunfolder.\nins.\ndesc.\ncongruence.\n"},{"statement":"Lemma iord_simpl_tc_doma:\n    doma (iord_simpl G sc ⨾ ⦗tc⦘) (event ↓₁ E).","proof":"apply iord_simpl_tc_doma_impl.\nrewrite tlsc_E; eauto.\n"},{"statement":"Lemma iord_coh_implies_iord_simpl_coh' ICOH:\n    dom_rel (iord_simpl G sc ⨾ ⦗tc⦘) ⊆₁ tc.","proof":"rewrite set_split_complete with (s' := dom_rel _) (s := event ↓₁ is_init).\nforward eapply iord_simpl_tc_doma as IS_DOM%doma_rewrite; eauto.\napply set_subset_union_l.\nsplit.\n{\nrewrite IS_DOM.\ndestruct TCOH.\nrewrite <- tls_coh_init at 2.\nunfold init_tls.\nrewrite set_pair_alt, set_map_inter.\nrewrite <- set_interA.\napply set_subset_inter; [| reflexivity].\nrewrite dom_eqv1, set_interC.\napply set_subset_inter; [| reflexivity].\nunfold iord_simpl.\nunfold SB, RF, FWBOB, AR, IPROP, PROP.\nbasic_solver 10.\n}\nrewrite set_interC, <- dom_eqv1.\nred in ICOH.\nrewrite <- ICOH at 2.\napply dom_rel_mori.\nunfold iord.\nfold iord_simpl.\nrewrite restr_relE.\nrewrite !seqA, seq_eqvC.\nrewrite set_minusE, set_map_inter, id_inter.\nrewrite !seqA, seq_eqvC.\nrewrite <- seqA with (r3 := ⦗_⦘ ⨾ ⦗_⦘).\nrewrite <- seqA with (r2 := _ ⨾ ⦗tc⦘).\nrewrite set_compl_set_mapC.\netransitivity.\n2: {\napply seq_mori; [reflexivity| ].\nrewrite <- id_inter.\napply domb_rewrite.\nrewrite iord_simpl_E_ENI; auto.\nrewrite crE, map_rel_union.\nrepeat case_union _ _.\napply union_domb.\n{\nrewrite (@tlsc_E G tc) at 1; eauto.\nunfolder.\nins.\ndesc.\nsplit; congruence.\n}\nunfold E_ENI.\nbasic_solver.\n}\napply doma_rewrite.\nrewrite IS_DOM.\nbasic_solver.\n"},{"statement":"Lemma iord_simpl_coh_implies_iord_coh ICOHs:\n    iord_coherent G sc tc.","proof":"red.\nerewrite dom_rel_mori; [by apply ICOHs| ].\nunfold iord, iord_simpl.\nbasic_solver 10.\n"},{"statement":"Lemma iord_coh_clos_refl ICOH:\n    dom_rel ((iord G sc)^? ⨾ ⦗tc⦘) ⊆₁ tc.","proof":"rewrite crE, seq_union_l, seq_id_l, dom_union.\nred in ICOH.\nrewrite ICOH.\nbasic_solver.\n"},{"statement":"Lemma iord_simpl_coh_clos_refl ICOHs:\n    dom_rel ((iord_simpl G sc)^? ⨾ ⦗tc⦘) ⊆₁ tc.","proof":"rewrite crE, seq_union_l, seq_id_l, dom_union.\nred in ICOHs.\nrewrite ICOHs.\nbasic_solver.\n"},{"statement":"Lemma dom_rel_iord_ext_parts (a1 a2: trav_action) (r: relation actid)\n      (R_IORD: ⦗action ↓₁ eq a1⦘ ⨾ event ↓ r ⨾ ⦗action ↓₁ eq a2⦘ ⊆ iord_simpl G sc)\n      (R_E_ENI: r ⊆ E × (E \\₁ is_init))\n      (INITa1: is_init ∩₁ E ⊆₁ event ↑₁ (tc ∩₁ action ↓₁ eq a1))\n  :\n  dom_rel (r ⨾ ⦗event ↑₁ (dom_cond (iord G sc) tc ∩₁ action ↓₁ eq a2)⦘)\n          ⊆₁ event ↑₁ (tc ∩₁ action ↓₁ eq a1).","proof":"rewrite set_split_complete with (s' := dom_rel _) (s := is_init).\napply dom_helper_3 in R_E_ENI.\napply set_subset_union_l.\nsplit.\n{\nrewrite <- INITa1.\nrewrite !dom_seq.\nrewrite R_E_ENI.\nbasic_solver.\n}\nrewrite set_interC, <- dom_eqv1, <- seqA.\neapply dom_rel_collect_event with (b := a1).\napply set_subset_inter_r.\nsplit; [| basic_solver].\nrewrite set_interC, id_inter.\narewrite (⦗action ↓₁ eq a1⦘ ⨾ event ↓ (⦗set_compl is_init⦘ ⨾ r) ⨾ ⦗action ↓₁ eq a2⦘ ⊆ iord G sc).\n{\nrewrite iord_alt.\nrewrite R_E_ENI.\nunfolder.\nins.\ndesc.\nsplits; eauto; try congruence.\napply R_IORD.\nbasic_solver.\n}\nrewrite dom_cond_elim.\nbasic_solver.\n"},{"statement":"Lemma iord_coherent_extend ICOH lbl      \n      (ADD: dom_cond (iord G sc) tc lbl):\n  iord_coherent G sc (tc ∪₁ eq lbl).","proof":"red.\nrewrite id_union, seq_union_r, dom_union.\nred in ICOH, ADD.\nrewrite ICOH, ADD.\nbasic_solver.\n"},{"statement":"Lemma iord_coherent_element_prefix ICOH (lbl: trav_label)\n      (Tlbl: tc lbl)\n      (IMMCON: imm_consistent G sc):\n  dom_rel (iord G sc ⨾ ⦗eq lbl⦘) ⊆₁ tc \\₁ eq lbl.","proof":"clear WFSC.\nrewrite set_minusE.\napply set_subset_inter_r.\nsplit.\n{\netransitivity; [| apply ICOH].\nbasic_solver.\n}\nintros x [y [REL ->]%seq_eqv_r].\nintros ->.\nedestruct iord_irreflexive; eauto; apply IMMCON.\n"},{"statement":"Lemma dom_rel_iord_ext_parts_tl (r: relation trav_label)\n      (R_IORD: r ⊆ iord_simpl G sc)\n      (R_E_ENI: r ⊆ (event ↓₁ E) × (event ↓₁ (E \\₁ is_init)))\n      (INIT: event ↓₁ is_init ∩₁ dom_rel r ⊆₁ tc)\n      (ICOH': iord_coherent G sc tc):\n  dom_rel (r ⨾ ⦗tc⦘) ⊆₁ tc.","proof":"rewrite AuxRel2.set_split_complete with (s' := dom_rel _) (s := event ↓₁ is_init).\napply dom_helper_3 in R_E_ENI.\napply set_subset_union_l.\nsplit.\n{\nrewrite set_interC, <- dom_eqv1.\ngeneralize INIT.\nbasic_solver.\n}\nrewrite set_interC, <- dom_eqv1, <- seqA.\nrewrite R_E_ENI.\nred in ICOH'.\nrewrite <- ICOH' at 2.\napply dom_rel_mori.\nhahn_frame_r.\nrewrite iord_alt, R_IORD.\nbasic_solver.\n"},{"statement":"Lemma iord_coherent_crt G sc T\n  (ICOH: iord_coherent G sc T):\n  dom_rel ((iord G sc)^* ⨾ ⦗T⦘) ⊆₁ T.","proof":"intros x [y HH].\napply seq_eqv_r in HH.\ndestruct HH as [II TY].\napply clos_rt_rt1n in II.\ninduction II; auto.\napply IHII in TY.\neapply iord_coh_clos_refl; eauto.\nclear -H TY.\nbasic_solver 10.\n"},{"statement":"Lemma iord_coh_implies_iord_simpl_coh G sc tc\n      (tCOH: tls_coherent G tc) (ICOH: iord_coherent G sc tc)\n      (CONS: imm_consistent G sc) (WF: Wf G):      \n  dom_rel (iord_simpl G sc ⨾ ⦗tc⦘) ⊆₁ tc.","proof":"apply iord_coh_implies_iord_simpl_coh'; auto.\n{\nby apply CONS.\n}\napply imm_s_hb.coherence_sc_per_loc, CONS.\n"},{"statement":"Lemma iord_coherent_equiv_wo_reserved G sc T1 T2\n      (EQ': T1 \\₁ action ↓₁ eq ta_reserve ≡₁ T2 \\₁ action ↓₁ eq ta_reserve)\n      (ICOH: iord_coherent G sc T1):\n  iord_coherent G sc T2.","proof":"red.\nred in ICOH.\nrewrite iord_no_reserve, restr_relE in *.\nrewrite !seqA, seq_eqvC, <- id_inter in *.\ntransitivity (T2 \\₁ action ↓₁ eq ta_reserve); [| basic_solver].\nrewrite <- EQ'.\nrewrite !set_minusE in EQ'.\nrewrite EQ' in ICOH.\nrewrite set_minusE.\napply set_subset_inter_r.\nsplit; [| basic_solver].\nrewrite ICOH.\nbasic_solver.\n"}]